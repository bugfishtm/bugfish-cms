/*
DayPilot Lite
Copyright (c) 2005 - 2024 Annpoint s.r.o.
https://www.daypilot.org/
Licensed under Apache Software License 2.0
Version: 2024.3.543-lite
*/
if("undefined"==typeof DayPilot)var DayPilot={};"undefined"==typeof DayPilot.Global&&(DayPilot.Global={}),function(){var e=function(){};if("undefined"==typeof DayPilot.Calendar||!DayPilot.Calendar.events){var t={};t.selectedCells=[],t.topSelectedCell=null,t.bottomSelectedCell=null,t.selecting=!1,t.column=null,t.firstSelected=null,t.firstMousePos=null,t.originalMouse=null,t.originalHeight=null,t.originalTop=null,t.resizing=null,t.globalHandlers=!1,t.moving=null,t.register=function(e){t.registered||(t.registered=[]);for(var i=t.registered,n=0;n<i.length;n++)if(i[n]===e)return;i.push(e)},t.unregister=function(e){var i=t.registered;if(i){var n=DayPilot.indexOf(i,e);n!==-1&&i.splice(n,1)}},t.getCellsAbove=function(e){for(var i=[],n=t.getColumn(e),a=e.parentNode,s=null;a&&s!==t.firstSelected;)for(s=a.getElementsByTagName("td")[n],i.push(s),a=a.previousSibling;a&&"TR"!==a.tagName;)a=a.previousSibling;return i},t.getCellsBelow=function(e){for(var i=[],n=t.getColumn(e),a=e.parentNode,s=null;a&&s!==t.firstSelected;)for(s=a.getElementsByTagName("td")[n],i.push(s),a=a.nextSibling;a&&"TR"!==a.tagName;)a=a.nextSibling;return i},t.getColumn=function(e){for(var t=0;e.previousSibling;)e=e.previousSibling,"TD"===e.tagName&&t++;return t},t.gUnload=function(e){if(t.registered)for(var i=t.registered,n=0;n<i.length;n++){var a=i[n];a.dispose(),t.unregister(a)}},t.gMouseUp=function(i){if(t.resizing){if(!t.resizingShadow)return t.resizing.style.cursor="default",document.body.style.cursor="default",t.resizing=null,void(DayPilot.Global.resizing=null);var n=t.resizing.event,a=t.resizingShadow.clientHeight+4,s=t.resizingShadow.offsetTop,l=t.resizing.dpBorder;t.deleteShadow(t.resizingShadow),t.resizingShadow=null,t.resizing.style.cursor="default",n.calendar.nav.top.style.cursor="auto",t.resizing.onclick=null,t.resizing=null,DayPilot.Global.resizing=null,n.calendar.a(n,a,s,l)}else if(t.moving){if(!t.movingShadow)return t.moving=null,DayPilot.Global.moving=null,void(document.body.style.cursor="default");var s=t.movingShadow.offsetTop,n=t.moving.event;t.deleteShadow(t.movingShadow),DayPilot.Util.removeClass(t.moving,n.calendar.b("_event_moving_source"));var o=t.movingShadow.column;t.moving=null,DayPilot.Global.moving=null,t.movingShadow=null,n.calendar.nav.top.style.cursor="auto",n.calendar.c(n,o,s,i)}else if(t.selecting&&null!==t.topSelectedCell){var r=t.selecting.calendar;t.selecting=!1;var h=r.getSelection();r.d(h.start,h.end,h.resource),"Hold"!==r.timeRangeSelectedHandling&&"HoldForever"!==r.timeRangeSelectedHandling&&e()}else t.selecting=!1},t.deleteShadow=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},t.moveShadow=function(e){var i=t.movingShadow,n=i.parentNode;n.style.display="none",i.parentNode.removeChild(i),e.firstChild.appendChild(i),i.style.left="0px",n.style.display="",i.style.width=t.movingShadow.parentNode.offsetWidth+1+"px"},t.Calendar=function(e,i){var n=!1;if(this instanceof t.Calendar&&!this.f&&(n=!0,this.f=!0),!n)throw"DayPilot.Calendar() is a constructor and must be called as 'var c = new DayPilot.Calendar(id);'";var a=this;this.uniqueID=null,this.isCalendar=!0,this.v="2024.3.543-lite",this.id=e,this.clientName=e,this.cache={},this.cache.pixels={},this.elements={},this.elements.events=[],this.elements.selection=[],this.nav={},this.afterRender=function(){},this.fasterDispose=!0,this.angularAutoApply=!1,this.api=2,this.businessBeginsHour=9,this.businessEndsHour=18,this.cellHeight=30,this.columnMarginRight=5,this.columnsLoadMethod="GET",this.contextMenu=null,this.days=1,this.durationBarVisible=!0,this.eventsLoadMethod="GET",this.headerDateFormat=null,this.headerHeight=30,this.headerTextWrappingEnabled=!1,this.height=300,this.heightSpec="BusinessHours",this.hideUntilInit=!0,this.hourWidth=60,this.initScrollPos="Auto",this.loadingLabelHtml=null,this.loadingLabelText="Loading...",this.loadingLabelVisible=!0,this.locale="en-us",this.showToolTip=!0,this.startDate=(new DayPilot.Date).getDatePart(),this.cssClassPrefix="calendar_default",this.theme=null,this.timeFormat="Auto",this.viewType="Days",this.visible=!0,this.xssProtection="Enabled",this.headerClickHandling="Enabled",this.eventClickHandling="Enabled",this.eventResizeHandling="Update",this.eventRightClickHandling="ContextMenu",this.eventMoveHandling="Update",this.eventDeleteHandling="Disabled",this.timeRangeSelectedHandling="Enabled",this.onBeforeCellRender=null,this.onBeforeEventRender=null,this.onBeforeHeaderRender=null,this.onEventClick=null,this.onEventClicked=null,this.onEventDelete=null,this.onEventDeleted=null,this.onEventMove=null,this.onEventMoved=null,this.onEventResize=null,this.onEventResized=null,this.onEventRightClick=null,this.onEventRightClicked=null,this.onHeaderClick=null,this.onHeaderClicked=null,this.onTimeRangeSelect=null,this.onTimeRangeSelected=null,this.g=!1,this.clearSelection=function(){t.topSelectedCell=null,t.bottomSelectedCell=null,this.h()},this.h=function(){DayPilot.de(a.elements.selection),a.elements.selection=[],a.nav.activeSelection=null},this.cleanSelection=this.clearSelection,this.i=function(e,t,i){var n={};n.action=e,n.parameters=i,n.data=t,n.header=this.j();var s="JSON"+DayPilot.JSON.stringify(n);__doPostBack(a.uniqueID,s)},this.k=function(e,t,i){this.callbackTimeout&&window.clearTimeout(this.callbackTimeout),this.callbackTimeout=window.setTimeout(function(){a.loadingStart()},100);var n={};n.action=e,n.parameters=i,n.data=t,n.header=this.j();var s="JSON"+DayPilot.JSON.stringify(n);this.backendUrl?DayPilot.request(this.backendUrl,this.l,s,this.ajaxError):"function"==typeof WebForm_DoCallback&&WebForm_DoCallback(this.uniqueID,s,this.m,this.clientName,this.onCallbackError,!0)},this.onCallbackError=function(e,t){alert("Error!\r\nResult: "+e+"\r\nContext:"+t)},this.dispose=function(){var e=a;e.g||(e.g=!0,clearInterval(e.n),e.o(),e.nav.scroll.root=null,DayPilot.pu(e.nav.loading),e.p(),e.q(),e.nav.select=null,e.nav.cornerRight=null,e.nav.scrollable=null,e.nav.zoom=null,e.nav.loading=null,e.nav.header=null,e.nav.hourTable=null,e.nav.scrolltop=null,e.nav.scroll.onscroll=null,e.nav.scroll=null,e.nav.main=null,e.nav.message=null,e.nav.messageClose=null,e.nav.top=null,t.unregister(e))},this.disposed=function(){return this.g},this.r=function(){this.nav.top.dispose=this.dispose},this.l=function(e){a.m(e.responseText)},this.j=function(){var e={};return e.control="dpc",e.id=this.id,e.v=this.v,e.days=a.days,e.startDate=a.startDate,e.heightSpec=a.heightSpec,e.businessBeginsHour=a.businessBeginsHour,e.businessEndsHour=a.businessEndsHour,e.hashes=a.hashes,e.timeFormat=a.timeFormat,e.viewType=a.viewType,e.locale=a.locale,e},this.s=function(e,t){for(var i=e.parentNode;i&&"TD"!==i.tagName;)i=i.parentNode;var n=document.createElement("div");n.setAttribute("unselectable","on"),n.style.position="absolute",n.style.width=e.offsetWidth+"px",n.style.height=e.offsetHeight+"px",n.style.left=e.offsetLeft+"px",n.style.top=e.offsetTop+"px",n.style.boxSizing="border-box",n.style.zIndex=101,n.className=a.b("_shadow");var s=document.createElement("div");return s.className=a.b("_shadow_inner"),n.appendChild(s),i.firstChild.appendChild(n),n},this.t={},this.t.locale=function(){var e=DayPilot.Locale.find(a.locale);return e?e:DayPilot.Locale.US},this.t.timeFormat=function(){return"Auto"!==a.timeFormat?a.timeFormat:this.locale().timeFormat},this.t.u=function(){return"Disabled"!==a.xssProtection},this.t.w=function(){if("Auto"===a.weekStarts){var e=s.locale();return e?e.weekStarts:0}return a.weekStarts||0};var s=this.t;this.m=function(e,t){if(e&&0===e.indexOf("$$$")){if(!window.console)throw"Error received from the server side: "+e;return void console.log("Error received from the server side: "+e)}var e=JSON.parse(e);if(e.CallBackRedirect)return void(document.location.href=e.CallBackRedirect);if("None"===e.UpdateType)return a.loadingStop(),void a.z();if(a.o(),"Full"===e.UpdateType&&(a.columns=e.Columns,a.days=e.Days,a.startDate=new DayPilot.Date(e.StartDate),a.heightSpec=e.HeightSpec?e.HeightSpec:a.heightSpec,a.businessBeginsHour=e.BusinessBeginsHour?e.BusinessBeginsHour:a.businessBeginsHour,a.businessEndsHour=e.BusinessEndsHour?e.BusinessEndsHour:a.businessEndsHour,a.headerDateFormat=e.HeaderDateFormat?e.HeaderDateFormat:a.headerDateFormat,a.viewType=e.ViewType,a.backColor=e.BackColor?e.BackColor:a.backColor,a.eventHeaderVisible=e.EventHeaderVisible?e.EventHeaderVisible:a.eventHeaderVisible,a.timeFormat=e.TimeFormat?e.TimeFormat:a.timeFormat,a.locale=e.Locale?e.Locale:a.locale,a.A()),e.Hashes)for(var i in e.Hashes)a.hashes[i]=e.Hashes[i];a.events.list=e.Events,a.B(),a.C(),"Full"===e.UpdateType&&(a.D(),a.E(),a.F(),a.G()),a.z(),a.H(),a.clearSelection(),a.afterRender(e.CallBackData,!0),a.loadingStop()},this.I=function(){return this.J()/36e5},this.K=function(){return this.businessBeginsHour>this.businessEndsHour?24-this.businessBeginsHour+this.businessEndsHour:this.businessEndsHour-this.businessBeginsHour},this.L=function(){return this.J()/18e5},this.J=function(){var e=0;return e="BusinessHoursNoScroll"===this.heightSpec?this.K():24,60*e*60*1e3},this.M=function(){return"BusinessHoursNoScroll"===this.heightSpec?this.businessBeginsHour:0},this.N=function(){return 2===a.api},this.eventClickCallBack=function(e,t){this.k("EventClick",t,e)},this.eventClickPostBack=function(e,t){this.i("EventClick",t,e)},this.O=function(e){var t=this,i=t.event;if(a.N()){var n={};if(n.e=i,n.originalEvent=e,n.meta=e.metaKey,n.ctrl=e.ctrlKey,n.control=a,n.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof a.onEventClick&&(a.P.apply(function(){a.onEventClick(n)}),n.preventDefault.value))return;switch(a.eventClickHandling){case"CallBack":a.eventClickCallBack(i);break;case"PostBack":a.eventClickPostBack(i);break;case"ContextMenu":var s=i.client.contextMenu();s?s.show(i):a.contextMenu&&a.contextMenu.show(i)}"function"==typeof a.onEventClicked&&a.P.apply(function(){a.onEventClicked(n)})}else switch(a.eventClickHandling){case"PostBack":a.eventClickPostBack(i);break;case"CallBack":a.eventClickCallBack(i);break;case"JavaScript":a.onEventClick(i)}},this.Q=function(e){var t=this.event;if(e.stopPropagation&&e.stopPropagation(),!t.client.rightClickEnabled())return!1;var i={};if(i.e=t,i.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof a.onEventRightClick&&(a.onEventRightClick(i),i.preventDefault.value))return!1;switch(a.eventRightClickHandling){case"ContextMenu":var n=t.client.contextMenu();n?n.show(t):a.contextMenu&&a.contextMenu.show(this.event)}return"function"==typeof a.onEventRightClicked&&a.onEventRightClicked(i),e.preventDefault&&e.preventDefault(),!1},this.eventDeleteCallBack=function(e,t){this.k("EventDelete",t,e)},this.eventDeletePostBack=function(e,t){this.i("EventDelete",t,e)},this.R=function(e){if(a.N()){var t={};if(t.e=e,t.control=a,t.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof a.onEventDelete&&(a.P.apply(function(){a.onEventDelete(t)}),t.preventDefault.value))return;switch(a.eventDeleteHandling){case"CallBack":a.eventDeleteCallBack(e);break;case"PostBack":a.eventDeletePostBack(e);break;case"Update":a.events.remove(e)}"function"==typeof a.onEventDeleted&&a.P.apply(function(){a.onEventDeleted(t)})}else switch(a.eventDeleteHandling){case"PostBack":a.eventDeletePostBack(e);break;case"CallBack":a.eventDeleteCallBack(e);break;case"JavaScript":a.onEventDelete(e)}},this.eventResizeCallBack=function(e,t,i,n){if(!t)throw"newStart is null";if(!i)throw"newEnd is null";var a={};a.e=e,a.newStart=t,a.newEnd=i,this.k("EventResize",n,a)},this.eventResizePostBack=function(e,t,i,n){if(!t)throw"newStart is null";if(!i)throw"newEnd is null";var a={};a.e=e,a.newStart=t,a.newEnd=i,this.i("EventResize",n,a)},this.a=function(e,t,i,n){var s=1,l=new Date,o=new Date,r=e.start(),h=e.end();if("top"===n){var c=r.getDatePart(),d=Math.floor((i-s)/a.cellHeight),u=30*d,v=60*u*1e3,p=60*a.M()*60*1e3;l=c.addTime(v+p),o=e.end()}else if("bottom"===n){var c=h.getDatePart(),d=Math.floor((i+t-s)/a.cellHeight),u=30*d,v=60*u*1e3,p=60*a.M()*60*1e3;l=r,o=c.addTime(v+p)}if(a.N()){var f={};if(f.e=e,f.control=a,f.newStart=l,f.newEnd=o,f.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof a.onEventResize&&(a.P.apply(function(){a.onEventResize(f)}),f.preventDefault.value))return;switch(a.eventResizeHandling){case"PostBack":a.eventResizePostBack(e,l,o);break;case"CallBack":a.eventResizeCallBack(e,l,o);break;case"Update":e.start(l),e.end(o),a.events.update(e)}"function"==typeof a.onEventResized&&a.P.apply(function(){a.onEventResized(f)})}else switch(a.eventResizeHandling){case"PostBack":a.eventResizePostBack(e,l,o);break;case"CallBack":a.eventResizeCallBack(e,l,o);break;case"JavaScript":a.onEventResize(e,l,o)}},this.eventMovePostBack=function(e,t,i,n,a){if(!t)throw"newStart is null";if(!i)throw"newEnd is null";var s={};s.e=e,s.newStart=t,s.newEnd=i,this.i("EventMove",a,s)},this.eventMoveCallBack=function(e,t,i,n,a){if(!t)throw"newStart is null";if(!i)throw"newEnd is null";var s={};s.e=e,s.newStart=t,s.newEnd=i,this.k("EventMove",a,s)},this.c=function(e,t,i,n){var s=1,l=Math.floor((i-s)/a.cellHeight),o=30*l*60*1e3,r=e.start(),h=e.end(),c=new Date;r instanceof DayPilot.Date&&(r=r.toDate()),c.setTime(Date.UTC(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate()));var d=r.getTime()-(c.getTime()+3600*r.getUTCHours()*1e3+30*Math.floor(r.getUTCMinutes()/30)*60*1e3),u=h.getTime()-r.getTime(),v=this.S[t],p=v.id,f=v.start.getTime(),g=new Date;g.setTime(f+o+d);var m=new DayPilot.Date(g),y=m.addTime(u);if(a.N()){var b={};if(b.e=e,b.newStart=m,b.newEnd=y,b.newResource=p,b.ctrl=n.ctrlKey,b.shift=n.shiftKey,b.control=a,b.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof a.onEventMove&&(a.P.apply(function(){a.onEventMove(b)}),b.preventDefault.value))return;switch(a.eventMoveHandling){case"PostBack":a.eventMovePostBack(e,m,y,v.id);break;case"CallBack":a.eventMoveCallBack(e,m,y,v.id);break;case"Update":e.start(m),e.end(y),e.resource(p),a.events.update(e)}"function"==typeof a.onEventMoved&&a.P.apply(function(){a.onEventMoved(b)})}else switch(a.eventMoveHandling){case"PostBack":a.eventMovePostBack(e,m,y,v.id);break;case"CallBack":a.eventMoveCallBack(e,m,y,v.id);break;case"JavaScript":a.onEventMove(e,m,y,v.id,!1)}},this.timeRangeSelectedPostBack=function(e,t,i,n){var a={};a.start=e,a.end=t,this.i("TimeRangeSelected",n,a)},this.timeRangeSelectedCallBack=function(e,t,i,n){var a={};a.start=e,a.end=t,this.k("TimeRangeSelected",n,a)},this.d=function(e,t,i){if(e=new DayPilot.Date(e),t=new DayPilot.Date(t),this.N()){var n={};if(n.start=e,n.end=t,n.resource=i,n.control=a,n.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof a.onTimeRangeSelect&&(a.P.apply(function(){a.onTimeRangeSelect(n)}),n.preventDefault.value))return;switch(a.timeRangeSelectedHandling){case"PostBack":a.timeRangeSelectedPostBack(e,t);break;case"CallBack":a.timeRangeSelectedCallBack(e,t)}"function"==typeof a.onTimeRangeSelected&&a.P.apply(function(){a.onTimeRangeSelected(n)})}else switch(a.timeRangeSelectedHandling){case"PostBack":a.timeRangeSelectedPostBack(e,t);break;case"CallBack":a.timeRangeSelectedCallBack(e,t);break;case"JavaScript":a.onTimeRangeSelected(e,t)}},this.T=function(e){if(!t.selecting&&"Disabled"!==a.timeRangeSelectedHandling){var i=e.which;if(1===i||0===i)return t.firstMousePos=DayPilot.mc(e),t.selecting={},t.selecting.calendar=a,t.selectedCells&&(a.clearSelection(),t.selectedCells=[]),t.column=t.getColumn(this),t.selectedCells.push(this),t.firstSelected=this,t.topSelectedCell=this,t.bottomSelectedCell=this,a.U(),!1}},this.U=function(){this.getSelection();!function(){var e=t.topSelectedCell,i=t.bottomSelectedCell,n=function(){if(e.data)return e.data.x;for(var t=e.parentNode.cells,i=0;i<t.length;i++)if(t[i]===e)return i;return-1}(),s=a.S[n];if(s){var l=s.start,o=a.getPixels(e.start,l).boxTop,r=a.getPixels(i.end,l).boxBottom,h=r-o,c=function(){if(a.nav.activeSelection)return a.nav.activeSelection;var e=document.createElement("div");e.setAttribute("unselectable","on"),e.style.position="absolute",e.style.left="0px",e.style.width="100%";var t=document.createElement("div");return t.setAttribute("unselectable","on"),t.className=a.b("_shadow_inner"),e.appendChild(t),a.nav.events.rows[0].cells[n].selection.appendChild(e),a.elements.selection.push(e),a.nav.activeSelection=e,e}();c.className=a.b("_shadow"),c.firstChild.innerHTML="",c.style.top=o+"px",c.style.height=h+"px"}}()},this.V=function(e){if("undefined"!=typeof t&&t.selecting){var i=DayPilot.mc(e);t.getColumn(this)===t.column&&(a.clearSelection(),i.y<t.firstMousePos.y?(t.selectedCells=t.getCellsBelow(this),t.topSelectedCell=t.selectedCells[0],t.bottomSelectedCell=t.firstSelected):(t.selectedCells=t.getCellsAbove(this),t.topSelectedCell=t.firstSelected,t.bottomSelectedCell=t.selectedCells[0]),a.U())}},this.getSelection=function(){var e=t.topSelectedCell.start,i=t.bottomSelectedCell.end,n=t.topSelectedCell.resource;return new DayPilot.Selection(e,i,n,a)},this.W=function(e){if(e<0)return null;for(var t=0,i=a.nav.events.rows[0].cells,n=0;n<i.length;n++){if(t+=i[n].offsetWidth,e<t)return n}return null},this.X={},this.X.getCellCoords=function(){var e={};if(e.x=0,e.y=0,!a.coords)return null;e.x=a.W(a.coords.x);var t=0,i=Math.floor((a.coords.y-t)/a.cellHeight);return e.y=i,e.x<0?null:e},this.columns={},this.columns.list=[],this.columns.load=function(e,t,i){if(!e)throw new DayPilot.Exception("columns.load(): 'url' parameter required");var n=function(e){var t={};t.exception=e.exception,t.request=e.request,"function"==typeof i&&i(t)},s=function(e){var i,s=e.request;try{i=JSON.parse(s.responseText)}catch(e){var l={};return l.exception=e,void n(l)}if(DayPilot.isArray(i)){var o={};if(o.preventDefault=function(){this.preventDefault.value=!0},o.data=i,"function"==typeof t&&t(o),o.preventDefault.value)return;a.columns.list=i,a.Y&&a.update()}};a.columnsLoadMethod&&"POST"===a.columnsLoadMethod.toUpperCase()?DayPilot.ajax({"method":"POST","url":e,"success":s,"error":n}):DayPilot.ajax({"method":"GET","url":e,"success":s,"error":n})},this.A=function(){var e;e="Resources"!==a.viewType?this.Z():a.columns.list,this.S=[];for(var t=0;t<e.length;t++){var i=this.$(e[t]);this.S.push(i)}},this.$=function(e){var t={};return t.name=e.name,t.html=e.html,t.id=e.id,t.toolTip=e.toolTip,t.data=e,e.start?t.start=new DayPilot.Date(e.start):t.start=new DayPilot.Date(a.startDate),t.putIntoBlock=function(e){for(var t=0;t<this.blocks.length;t++){var i=this.blocks[t];if(i.overlapsWith(e.part.top,e.part.height))return i.events.push(e),i.min=Math.min(i.min,e.part.top),i.max=Math.max(i.max,e.part.top+e.part.height),t}var i=[];return i.lines=[],i.events=[],i.overlapsWith=function(e,t){return!(e+t-1<this.min||e>this.max-1)},i.putIntoLine=function(e){for(var t=0;t<this.lines.length;t++){var i=this.lines[t];if(i.isFree(e.part.top,e.part.height))return i.push(e),t}var i=[];return i.isFree=function(e,t){for(var i=e+t-1,n=this.length,a=0;a<n;a++){var s=this[a];if(!(i<s.part.top||e>s.part.top+s.part.height-1))return!1}return!0},i.push(e),this.lines.push(i),this.lines.length-1},i.events.push(e),i.min=e.part.top,i.max=e.part.top+e.part.height,this.blocks.push(i),this.blocks.length-1},t.putIntoLine=function(e){for(var t=0;t<this.lines.length;t++){var i=this.lines[t];if(i.isFree(e.part.top,e.part.height))return i.push(e),t}var i=[];return i.isFree=function(e,t){for(var i=e+t-1,n=this.length,a=0;a<n;a++){var s=this[a];if(!(i<s.part.top||e>s.part.top+s.part.height-1))return!1}return!0},i.push(e),this.lines.push(i),this.lines.length-1},t},this.Z=function(){var e=[],t=this.startDate.getDatePart(),i=this.days;switch(this.viewType){case"Day":i=1;break;case"Week":i=7;var n=s.w();t=t.firstDayOfWeek(n);break;case"WorkWeek":i=5,t=t.firstDayOfWeek(1)}"BusinessHoursNoScroll"===this.heightSpec&&(t=t.addHours(this.businessBeginsHour));for(var l=0;l<i;l++){var o=a.headerDateFormat?a.headerDateFormat:s.locale().datePattern,r={};r.start=t.addDays(l),r.name=r.start.toString(o,s.locale()),e.push(r)}return e},this.visibleStart=function(){if("Resources"===a.viewType){if(0===a.S.length)return DayPilot.Date.today();var e=a.S.map(function(e){return e.start.getTime()}),t=Math.min.apply(null,e);return new DayPilot.Date(t)}return this.S[0].start},this.visibleEnd=function(){if("Resources"===a.viewType){if(0===a.S.length)return DayPilot.Date.today().addDays(1);var e=a.S.map(function(e){return e.start.getTime()}),t=Math.max.apply(null,e);return new DayPilot.Date(t).addDays(1)}var t=this.S.length-1;return this.S[t].start.addDays(1)},this.b=function(e){var t=this.theme||this.cssClassPrefix;return t?t+e:""},this.o=function(){if(this.elements.events)for(var e=0;e<this.elements.events.length;e++){var t=this.elements.events[e],i=t.event;if(i&&(i.calendar=null),t.onclick=null,t.onclickSave=null,t.onmouseover=null,t.onmouseout=null,t.onmousemove=null,t.onmousedown=null,t.firstChild&&t.firstChild.firstChild&&t.firstChild.firstChild.tagName&&"IMG"===t.firstChild.firstChild.tagName.toUpperCase()){var n=t.firstChild.firstChild;n.onmousedown=null,n.onmousemove=null,n.onclick=null}t.helper=null,t.data=null,t.event=null,DayPilot.de(t)}this.elements.events=[]},this._=function(e){var i=e.cache||e.data,n=this.nav.events,s=document.createElement("div");s.style.position="absolute",s.style.left=e.part.left+"%",s.style.top=e.part.top+"px",s.style.width=e.part.width+"%",s.style.height=Math.max(e.part.height,2)+"px",s.style.overflow="hidden",s.data=e,s.event=e,s.unselectable="on",s.style.MozUserSelect="none",s.style.KhtmlUserSelect="none",s.className=this.b("_event"),i.cssClass&&DayPilot.Util.addClass(s,i.cssClass),a.showToolTip&&e.client.toolTip()&&(s.title=e.client.toolTip()),s.isFirst=e.part.start.getTime()===e.start().getTime(),s.isLast=e.part.end.getTime()===e.end().getTime(),s.onclick=this.O,DayPilot.re(s,"contextmenu",this.Q),s.onmouseout=function(e){s.deleteIcon&&(s.deleteIcon.style.display="none")},s.onmousemove=function(i){var n=5;if("undefined"!=typeof t){var l=DayPilot.mo3(s,i);if(l&&!t.resizing&&!t.moving){s.deleteIcon&&(s.deleteIcon.style.display="");var o=this.isLast;l.y<=n&&e.client.resizeEnabled()?(this.style.cursor="n-resize",this.dpBorder="top"):this.offsetHeight-l.y<=n&&e.client.resizeEnabled()?o?(this.style.cursor="s-resize",this.dpBorder="bottom"):this.style.cursor="not-allowed":t.resizing||t.moving||("Disabled"!==a.eventClickHandling?this.style.cursor="pointer":this.style.cursor="default")}}},s.onmousedown=function(i){var n=i.which||i.button;if("n-resize"!==this.style.cursor&&"s-resize"!==this.style.cursor||1!==n){if(1===n&&e.client.moveEnabled()){t.moving=this,DayPilot.Global.moving=this,t.moving.event=this.event;var s=t.moving.helper={};s.oldColumn=a.S[this.data.part.dayIndex].id,t.originalMouse=DayPilot.mc(i),t.originalTop=this.offsetTop;var l=DayPilot.mo3(this,i);l?t.moveOffsetY=l.y:t.moveOffsetY=0,a.nav.top.style.cursor="move"}}else t.resizing=this,DayPilot.Global.resizing=this,t.originalMouse=DayPilot.mc(i),t.originalHeight=this.offsetHeight,t.originalTop=this.offsetTop,a.nav.top.style.cursor=this.style.cursor;return!1};var l=document.createElement("div");if(l.setAttribute("unselectable","on"),l.className=a.b("_event_inner"),l.innerHTML=e.client.html(),"darker"===i.borderColor&&i.backColor?l.style.borderColor=DayPilot.ColorUtil.darker(i.backColor,2):l.style.borderColor=i.borderColor,i.backColor&&(l.style.background=i.backColor),i.fontColor&&(l.style.color=i.fontColor),s.appendChild(l),e.client.barVisible()){var o=e.part.height-2,r=100*e.part.barTop/o,h=Math.ceil(100*e.part.barHeight/o),c=document.createElement("div");c.setAttribute("unselectable","on"),c.className=this.b("_event_bar"),c.style.position="absolute",i.barBackColor&&(c.style.backgroundColor=i.barBackColor);var d=document.createElement("div");d.setAttribute("unselectable","on"),d.className=this.b("_event_bar_inner"),d.style.top=r+"%",0<h&&h<=1?d.style.height="1px":d.style.height=h+"%",i.barColor&&(d.style.backgroundColor=i.barColor),c.appendChild(d),s.appendChild(c)}if(e.client.deleteEnabled()){var u=document.createElement("div");u.style.position="absolute",u.style.right="2px",u.style.top="2px",u.style.width="17px",u.style.height="17px",u.className=a.b("_event_delete"),u.onmousedown=function(e){e.stopPropagation()},u.onclick=function(e){e.stopPropagation();var t=this.parentNode.event;t&&a.R(t)},u.style.display="none",s.deleteIcon=u,s.appendChild(u)}var v=i.areas?DayPilot.Areas.copy(i.areas):[];if(DayPilot.Areas.attach(s,e,{"areas":v}),n.rows[0].cells[e.part.dayIndex]){n.rows[0].cells[e.part.dayIndex].firstChild.appendChild(s),a.aa(s)}if("function"==typeof a.onAfterEventRender){var p={};p.e=s.event,p.div=s,a.onAfterEventRender(p)}a.elements.events.push(s)},this.aa=function(e){for(var t=e&&e.childNodes?e.childNodes.length:0,i=0;i<t;i++)try{var n=e.childNodes[i];1===n.nodeType&&(n.unselectable="on",this.aa(n))}catch(e){}},this.H=function(){for(var e=0;e<this.S.length;e++){var t=this.S[e];if(t.blocks)for(var i=0;i<t.blocks.length;i++)for(var n=t.blocks[i],a=0;a<n.lines.length;a++)for(var s=n.lines[a],l=0;l<s.length;l++){var o=s[l];o.part.width=100/n.lines.length,o.part.left=o.part.width*a;var r=a===n.lines.length-1;r||(o.part.width=1.5*o.part.width),this._(o)}}},this.ba=function(){this.nav.top.innerHTML="",DayPilot.Util.addClass(this.nav.top,this.b("_main")),this.nav.top.style.MozUserSelect="none",this.nav.top.style.KhtmlUserSelect="none",this.nav.top.style.position="relative",this.nav.top.style.width=this.width?this.width:"100%",this.hideUntilInit&&(this.nav.top.style.visibility="hidden"),this.visible||(this.nav.top.style.display="none"),this.nav.scroll=document.createElement("div"),this.nav.scroll.style.height=this.ca()+"px","BusinessHours"===this.heightSpec?this.nav.scroll.style.overflow="auto":this.nav.scroll.style.overflow="hidden",this.nav.scroll.style.position="relative";var e=this.da();this.nav.top.appendChild(e),this.nav.scroll.style.zoom=1;var t=this.ea();this.nav.scrollable=t.firstChild,this.nav.scroll.appendChild(t),this.nav.top.appendChild(this.nav.scroll),this.nav.scrollLayer=document.createElement("div"),this.nav.scrollLayer.style.position="absolute",this.nav.scrollLayer.style.top="0px",this.nav.scrollLayer.style.left="0px",this.nav.top.appendChild(this.nav.scrollLayer),this.nav.loading=document.createElement("div"),this.nav.loading.style.position="absolute",this.nav.loading.style.top="0px",this.nav.loading.style.left=this.hourWidth+5+"px",this.nav.loading.innerHTML=a.fa(a.loadingLabelText,a.loadingLabelHtml),this.nav.loading.style.display="none",this.nav.top.appendChild(this.nav.loading)},this.F=function(){this.fasterDispose||DayPilot.pu(this.nav.hourTable),this.nav.scrollable.rows[0].cells[0].innerHTML="",this.nav.hourTable=this.ga(),this.nav.scrollable.rows[0].cells[0].appendChild(this.nav.hourTable)},this.ea=function(){var e=document.createElement("div");e.style.zoom=1,e.style.position="relative";var t=document.createElement("table");t.cellSpacing="0",t.cellPadding="0",t.border="0",t.style.border="0px none",t.style.width="100%",t.style.position="absolute";var i,n=t.insertRow(-1);i=n.insertCell(-1),i.valign="top",i.style.padding="0px",i.style.border="0px none",this.nav.hourTable=this.ga(),i.appendChild(this.nav.hourTable),i=n.insertCell(-1),i.valign="top",i.width="100%",i.style.padding="0px",i.style.border="0px none";var a=document.createElement("div");return a.style.position="relative",i.appendChild(a),a.appendChild(this.ha()),a.appendChild(this.ia()),e.appendChild(t),this.nav.zoom=e,e},this.ha=function(){var e=document.createElement("table");return e.cellPadding="0",e.cellSpacing="0",e.border="0",e.style.width="100%",e.style.border="0px none",e.style.tableLayout="fixed",this.nav.main=e,this.nav.events=e,e},this.ia=function(){var e=document.createElement("table");e.style.top="0px",e.cellPadding="0",e.cellSpacing="0",e.border="0",e.style.position="absolute",e.style.width="100%",e.style.border="0px none",e.style.tableLayout="fixed",this.nav.events=e;for(var t=this.S,i=t.length,n=e.insertRow(-1),s=0;s<i;s++){var l=n.insertCell(-1);l.style.padding="0px",l.style.border="0px none",l.style.height="0px",l.style.overflow="visible",a.rtl||(l.style.textAlign="left");var o=document.createElement("div");o.style.marginRight=a.columnMarginRight+"px",o.style.position="relative",o.style.height="1px",o.style.marginTop="-1px";var r=document.createElement("div");l.selection=r,l.appendChild(o),l.appendChild(r)}return e},this.ga=function(){var e=document.createElement("table");e.cellSpacing="0",e.cellPadding="0",e.border="0",e.style.border="0px none",e.style.width=this.hourWidth+"px",e.oncontextmenu=function(){return!1};for(var t=a.I(),i=0;i<t;i++)this.ja(e,i);return e},this.ja=function(e,t){var i=2*this.cellHeight,n=e.insertRow(-1);n.style.height=i+"px";var l=n.insertCell(-1);l.valign="bottom",l.unselectable="on",l.style.cursor="default",l.style.padding="0px",l.style.border="0px none";var o=document.createElement("div");o.style.position="relative",o.className=this.b("_rowheader"),o.style.width=this.hourWidth+"px",o.style.height=i+"px",o.style.overflow="hidden",o.unselectable="on";var r=document.createElement("div");r.className=this.b("_rowheader_inner"),r.unselectable="on";var h=document.createElement("div");h.unselectable="on";var c=this.startDate.addHours(t).addHours(a.M()),d=c.getHours(),u=d<12,v=s.timeFormat();"Clock12Hours"===v&&(d%=12,0===d&&(d=12)),h.innerHTML=d;var p=document.createElement("span");p.unselectable="on",p.className=this.b("_rowheader_minutes");var f;f="Clock12Hours"===v?u?"AM":"PM":"00",p.innerHTML=f,h.appendChild(p),r.appendChild(h),o.appendChild(r),l.appendChild(o)},this.ca=function(){switch(this.heightSpec){case"Full":return 48*this.cellHeight;case"BusinessHours":var e=this.K();return e*this.cellHeight*2;case"BusinessHoursNoScroll":var e=this.K();return e*this.cellHeight*2;default:throw"DayPilot.Calendar: Unexpected 'heightSpec' value."}},this.ka=function(){var e=a.nav.corner?a.nav.corner.parentNode:null;if(e){e.innerHTML="";var t=this.la();e.appendChild(t),a.nav.corner=t}},this.da=function(){var e=document.createElement("div");e.style.overflow="auto";var t=document.createElement("table");t.cellPadding="0",t.cellSpacing="0",t.border="0",t.style.width="100%",t.style.borderCollapse="separate",t.style.border="0px none";var i=t.insertRow(-1),n=i.insertCell(-1);n.style.padding="0px",n.style.border="0px none";var a=this.la();n.appendChild(a),this.nav.corner=a,n=i.insertCell(-1),n.style.width="100%",n.valign="top",n.style.position="relative",n.style.padding="0px",n.style.border="0px none",this.nav.header=document.createElement("table"),this.nav.header.cellPadding="0",this.nav.header.cellSpacing="0",this.nav.header.border="0",this.nav.header.width="100%",this.nav.header.style.tableLayout="fixed",this.nav.header.oncontextmenu=function(){return!1};var s="hidden"!==this.nav.scroll.style.overflow;if(n.appendChild(this.nav.header),s){n=i.insertCell(-1),n.unselectable="on";var l=document.createElement("div");l.unselectable="on",l.style.position="relative",l.style.width="16px",l.style.height=this.headerHeight+"px",l.className=this.b("_cornerright");var o=document.createElement("div");o.className=this.b("_cornerright_inner"),l.appendChild(o),n.appendChild(l),this.nav.cornerRight=l}return e.appendChild(t),e},this.la=function(){var e=document.createElement("div");e.style.position="relative",e.className=this.b("_corner"),e.style.width=this.hourWidth+"px",e.style.height=this.headerHeight+"px",e.oncontextmenu=function(){return!1};var t=document.createElement("div");return t.unselectable="on",t.className=this.b("_corner_inner"),e.appendChild(t),e},this.p=function(){var e=this.nav.main;e.root=null,e.onmouseup=null;for(var t=0;t<e.rows.length;t++)for(var i=e.rows[t],n=0;n<i.cells.length;n++){var a=i.cells[n];a.root=null,a.onmousedown=null,a.onmousemove=null,a.onmouseout=null,a.onmouseup=null}this.fasterDispose||DayPilot.pu(e)},this.E=function(){var e=this.nav.main,i=18e5,n=this.L(),s=a.S;for(e&&this.p();e&&e.rows&&e.rows.length>0;)this.fasterDispose||DayPilot.pu(e.rows[0]),
e.deleteRow(0);this.tableCreated=!0;for(var l=s.length,o=this.nav.events;o&&o.rows&&o.rows.length>0;)this.fasterDispose||DayPilot.pu(o.rows[0]),o.deleteRow(0);for(var l=s.length,r=o.insertRow(-1),h=0;h<l;h++){var c=r.insertCell(-1);c.style.padding="0px",c.style.border="0px none",c.style.height="0px",c.style.overflow="visible",a.rtl||(c.style.textAlign="left");var d=document.createElement("div");d.style.marginRight=a.columnMarginRight+"px",d.style.position="relative",d.style.height="1px",d.style.marginTop="-1px";var u=document.createElement("div");u.style.position="relative",c.selection=u,c.appendChild(d),c.appendChild(u)}for(var v=0;v<n;v++){var r=e.insertRow(-1);r.style.MozUserSelect="none",r.style.KhtmlUserSelect="none";for(var h=0;h<l;h++){var p=this.S[h],c=r.insertCell(-1);c.start=p.start.addTime(v*i),c.end=c.start.addTime(i),c.resource=p.id,c.onmousedown=this.T,c.onmouseup=function(){return!1},c.onclick=function(){return!1},c.root=this,c.style.padding="0px",c.style.border="0px none",c.style.verticalAlign="top",c.style.height=a.cellHeight+"px",c.style.overflow="hidden",c.unselectable="on";var d=document.createElement("div");d.unselectable="on",d.style.height=a.cellHeight+"px",d.style.position="relative",d.className=this.b("_cell");var f=this.ma(c.start,c.end),g={"business":f,"text":null,"html":null,"cssClass":null,"backColor":null,"backImage":null,"backRepeat":null};!function(){if("function"==typeof a.onBeforeCellRender){var e={};e.cell={"start":c.start,"end":c.end,"resource":c.resource,"properties":g},a.onBeforeCellRender(e)}}(),g.business&&DayPilot.Util.addClass(d,a.b("_cell_business")),g.cssClass&&DayPilot.Util.addClass(d,g.cssClass);var m=document.createElement("div");m.setAttribute("unselectable","on"),m.className=this.b("_cell_inner");var y=DayPilot.Util.escapeTextHtml(g.text,g.html);y&&(m.innerHTML=y),g.backColor&&(m.style.backgroundColor=g.backColor),g.backImage&&(m.style.backgroundImage="url("+g.backImage+")"),g.backRepeat&&(m.style.backgroundRepeat=g.backRepeat),d.appendChild(m),c.appendChild(d),c.appendChild(d)}}e.root=this,a.nav.scrollable.onmousemove=function(e){var i=a.nav.scrollable;a.coords=DayPilot.mo3(i,e);var n=DayPilot.mc(e);if(t.resizing){t.resizingShadow||(t.resizingShadow=a.s(t.resizing,!1,a.shadow));var s=a.cellHeight,l=1,o=n.y-t.originalMouse.y;if("bottom"===t.resizing.dpBorder){var r=Math.floor((t.originalHeight+t.originalTop+o+s/2)/s)*s-t.originalTop+l;r<s&&(r=s);var h=a.nav.main.clientHeight;t.originalTop+r>h&&(r=h-t.originalTop),t.resizingShadow.style.height=r+"px"}else if("top"===t.resizing.dpBorder){var c=Math.floor((t.originalTop+o-l+s/2)/s)*s+l;c<l&&(c=l),c>t.originalTop+t.originalHeight-s&&(c=t.originalTop+t.originalHeight-s);var r=t.originalHeight-(c-t.originalTop);r<s?r=s:t.resizingShadow.style.top=c+"px",t.resizingShadow.style.height=r+"px"}}else if(t.moving){if(!a.coords)return;if(!t.movingShadow){var d=3,n=DayPilot.mc(e),u=Math.abs(n.x-t.originalMouse.x)+Math.abs(n.y-t.originalMouse.y);if(u<=d)return;t.movingShadow=a.s(t.moving,!0,a.shadow),t.movingShadow.style.width=t.movingShadow.parentNode.offsetWidth+1+"px"}var s=a.cellHeight,l=1,v=t.moveOffsetY;v||(v=s/2);var c=Math.floor((a.coords.y-v-l+s/2)/s)*s+l;c<l&&(c=l);var p=a.nav.events,h=a.nav.main.clientHeight+l,f=parseInt(t.movingShadow.style.height);c+f>h&&(c=h-f),DayPilot.Util.addClass(t.moving,a.b("_event_moving_source")),t.movingShadow.parentNode.style.display="none",t.movingShadow.style.top=c+"px",t.movingShadow.parentNode.style.display="";var g=p.clientWidth/p.rows[0].cells.length,m=Math.floor((a.coords.x-45)/g);m<0&&(m=0),m<p.rows[0].cells.length&&m>=0&&t.movingShadow.column!==m&&(t.movingShadow.column=m,t.moveShadow(p.rows[0].cells[m]))}else if(t.selecting){var n=DayPilot.mc(e),y=a.X.getCellCoords(),b=t.column,C=a.nav.main.rows[y.y].cells[b];n.y<t.firstMousePos.y?(t.selectedCells=t.getCellsBelow(C),t.topSelectedCell=t.selectedCells[0],t.bottomSelectedCell=t.firstSelected):(t.selectedCells=t.getCellsAbove(C),t.topSelectedCell=t.firstSelected,t.bottomSelectedCell=t.selectedCells[0]),a.U()}},a.nav.scrollable.style.display=""},this.ma=function(e,t){return this.businessBeginsHour<this.businessEndsHour?!(e.getHours()<this.businessBeginsHour||e.getHours()>=this.businessEndsHour||6===e.getDayOfWeek()||0===e.getDayOfWeek()):e.getHours()>=this.businessBeginsHour||e.getHours()<this.businessEndsHour},this.q=function(){var e=this.nav.header;if(e&&e.rows)for(var t=0;t<e.rows.length;t++)for(var i=e.rows[t],n=0;n<i.cells.length;n++){var a=i.cells[n];a.onclick=null,a.onmousemove=null,a.onmouseout=null}this.fasterDispose||DayPilot.pu(e)},this.na=function(e){function t(t){var s=n[t],l=e?i.insertCell(-1):i.cells[t];l.data=s,l.style.overflow="hidden",l.style.padding="0px",l.style.border="0px none",l.style.height=a.headerHeight+"px",l.onclick=a.oa;var o,r=e?document.createElement("div"):l.firstChild;e?(r.unselectable="on",r.style.MozUserSelect="none",r.style.cursor="default",r.style.position="relative",r.className=a.b("_colheader"),r.style.height=a.headerHeight+"px",a.headerTextWrappingEnabled||(r.style.whiteSpace="nowrap"),o=document.createElement("div"),o.className=a.b("_colheader_inner"),o.unselectable="on",r.appendChild(o),l.appendChild(r)):o=r.firstChild;var h={};h.header={},h.header.cssClass=null,h.header.verticalAlignment="center",h.column=a.pa(s,a),"function"==typeof a.onBeforeHeaderRender&&(DayPilot.Util.copyProps(s,h.header,["id","start","name","html","backColor","toolTip","areas"]),a.onBeforeHeaderRender(h),DayPilot.Util.copyProps(h.header,s,["html","backColor","toolTip","areas","cssClass","verticalAlignment"])),s.toolTip&&(o.title=s.toolTip),s.cssClass&&DayPilot.Util.addClass(r,s.cssClass),s.backColor&&(o.style.background=s.backColor),s.areas&&DayPilot.Areas.attach(r,s);var c=s.verticalAlignment;if(c)switch(o.style.display="flex",c){case"center":o.style.alignItems="center";break;case"top":o.style.alignItems="flex-start";break;case"bottom":o.style.alignItems="flex-end"}r.firstChild.innerHTML=a.fa(s.name,s.html)}for(var i=e?this.nav.header.insertRow(-1):this.nav.header.rows[0],n=this.S,s=n.length,l=0;l<s;l++)t(l)},this.oa=function(e){if("Disabled"!==a.headerClickHandling){var t=this.data,i=a.pa(t),n={};n.header={},n.header.id=t.id,n.header.name=t.name,n.header.start=t.start,n.column=i,n.originalEvent=e,n.shift=e.shiftKey,n.ctrl=e.ctrlKey,n.meta=e.metaKey,n.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof a.onHeaderClick&&(a.onHeaderClick(n),n.preventDefault.value)||"function"==typeof a.onHeaderClicked&&a.onHeaderClicked(n)}},this.pa=function(e){return new DayPilot.CalendarColumn(e,a)},this.qa=function(){return this.width&&this.width.indexOf("px")!==-1?"Pixel":"Percentage"},this.D=function(){var e=this.nav.header,t=!0,i=this.S;for(i.length;this.headerCreated&&e&&e.rows&&e.rows.length>0;)this.fasterDispose||DayPilot.pu(e.rows[0]),e.deleteRow(0);this.headerCreated=!0;this.na(t)},this.loadingStart=function(){this.loadingLabelVisible&&(this.nav.loading.innerHTML=this.loadingLabelText,this.nav.loading.style.top=this.headerHeight+5+"px",this.nav.loading.style.display="")},this.commandCallBack=function(e,t){var i={};i.command=e,this.k("Command",t,i)},this.loadingStop=function(e){this.callbackTimeout&&window.clearTimeout(this.callbackTimeout),this.nav.loading.style.display="none"},this.ra=function(){var e=this.nav.scroll;e.onscroll||(e.onscroll=function(){a.sa()});var t="undefined"!=typeof this.ta.scrollpos?this.ta.scrollpos:this.initScrollPos;t&&("Auto"===t&&(t="BusinessHours"===this.heightSpec?2*this.cellHeight*this.businessBeginsHour:0),e.root=this,0===e.scrollTop&&(e.scrollTop=t))},this.callbackError=function(e,t){alert("Error!\r\nResult: "+e+"\r\nContext:"+t)},this.ua=function(){var e=DayPilot.sw(this.nav.scroll),t=this.nav.cornerRight;t&&(t.style.width=e+"px")},this.va=function(){t.globalHandlers||(t.globalHandlers=!0,DayPilot.re(document,"mouseup",t.gMouseUp),DayPilot.re(window,"unload",t.gUnload))},this.events={},this.events.add=function(e){var t=null;if(e instanceof DayPilot.Event)t=e.data;else{if("object"!=typeof e)throw"DayPilot.Calendar.events.add() expects an object or DayPilot.Event instance.";t=e}a.events.list||(a.events.list=[]),a.events.list.push(t),a.wa({"eventsOnly":!0}),a.P.notify()},this.events.find=function(e){if(!a.events.list)return null;if("function"==typeof e){for(var t=e,i=0;i<a.events.list.length;i++){var n=new DayPilot.Event(a.events.list[i],a);if(t(n))return n}return null}for(var i=0;i<a.events.list.length;i++){var s=a.events.list[i];if(s.id===e)return new DayPilot.Event(s,a)}return null},this.events.update=function(e){if(e instanceof DayPilot.Event)e.commit();else if("object"==typeof e){var t=a.events.find(e.id);if(t){var i=DayPilot.indexOf(a.events.list,t.data);a.events.list.splice(i,1,e)}}a.wa({"eventsOnly":!0}),a.P.notify()},this.events.remove=function(e){var t;if(e instanceof DayPilot.Event)t=e.data;else if("object"==typeof e){var i=a.events.find(e.id);i&&(t=i.data)}else if("string"==typeof e||"number"==typeof e){var i=a.events.find(e);i&&(t=i.data)}var n=DayPilot.indexOf(a.events.list,t);a.events.list.splice(n,1),a.wa({"eventsOnly":!0}),a.P.notify()},this.events.load=function(e,t,i){var n=function(e){var t={};t.exception=e.exception,t.request=e.request,"function"==typeof i&&i(t)},s=function(e){var i,s=e.request;try{i=JSON.parse(s.responseText)}catch(e){var l={};return l.exception=e,void n(l)}if(DayPilot.isArray(i)){var o={};if(o.preventDefault=function(){this.preventDefault.value=!0},o.data=i,"function"==typeof t&&t(o),o.preventDefault.value)return;a.events.list=i,a.Y&&a.wa({"eventsOnly":!0})}};if(a.eventsLoadMethod&&"POST"===a.eventsLoadMethod.toUpperCase())DayPilot.Http.ajax({"method":"POST","data":{"start":a.visibleStart().toString(),"end":a.visibleEnd().toString()},"url":e,"success":s,"error":n});else{var l=e,o="start="+a.visibleStart().toString()+"&end="+a.visibleEnd().toString();l+=l.indexOf("?")>-1?"&"+o:"?"+o,DayPilot.Http.ajax({"method":"GET","url":l,"success":s,"error":n})}},this.xa=function(){if(a.nav.top.className!==a.b("_main")){a.nav.top.className=a.b("_main");var e=a.nav.corner;e.className=a.b("_corner"),e.firstChild.className=a.b("_corner_inner");var t=a.nav.cornerRight;t&&(t.className=a.b("_cornerright"),t.firstChild.className=a.b("_cornerright_inner"))}},this.update=function(e){if(a.g)throw new DayPilot.Exception("You are trying to update a DayPilot.Calendar instance that has been disposed.");a.ya(e),a.wa()},this.wa=function(e){if(this.Y){var e=e||{},t=!e.eventsOnly;a.za(),a.o(),a.nav.top.style.cursor="auto",t&&(a.A(),a.D(),a.E(),a.F(),a.G(),a.ka(),a.ua(),a.xa(),a.Aa()),a.B(),a.C(),a.H(),a.clearSelection(),this.visible?this.show():this.hide()}},this.Ba=null,this.ya=function(e){if(e){var t={"events":{"preInit":function(){var e=this.data||[];DayPilot.isArray(e.list)?a.events.list=e.list:a.events.list=e}},"columns":{"preInit":function(){a.columns.list=this.data}}};this.Ba=t;for(var i in e)if(t[i]){var n=t[i];n.data=e[i],n.preInit&&n.preInit()}else a[i]=e[i]}},this.Ca=function(){var e=this.Ba;for(var t in e){var i=e[t];i.postInit&&i.postInit()}},this.Da=function(){if(this.id&&this.id.tagName)this.nav.top=this.id;else{if("string"!=typeof this.id)throw"DayPilot.Calendar() constructor requires the target element or its ID as a parameter";if(this.nav.top=document.getElementById(this.id),!this.nav.top)throw"DayPilot.Calendar: The placeholder element not found: '"+e+"'."}},this.Ea={},this.Ea.events=[],this.Fa=function(e){var t=this.Ea.events,i=this.events.list[e],n={};for(var s in i)n[s]=i[s];if("function"==typeof this.onBeforeEventRender){var l={};l.control=a,l.data=n,this.onBeforeEventRender(l)}t[e]=n},this.B=function(){var e=this.events.list;if(a.Ea.events=[],e){if(!DayPilot.isArray(e))throw new DayPilot.Exception("DayPilot.Calendar.events.list expects an array object. You supplied: "+typeof e);var t=e.length,i=864e5;this.cache.pixels={};var n=[];this.scrollLabels=[],this.minStart=1e4,this.maxEnd=0;for(var s=0;s<t;s++){var l=e[s],o=l;if("object"!=typeof o)throw new DayPilot.Exception("Event data item must be an object");if(!o.start)throw new DayPilot.Exception("Event data item must specify 'start' property");if(!o.end)throw new DayPilot.Exception("Event data item must specify 'end' property");if(o instanceof DayPilot.Event)throw new DayPilot.Exception("DayPilot.Calendar: DayPilot.Event object detected in events.list array. Use raw event data instead.");l.start=new DayPilot.Date(l.start),l.end=new DayPilot.Date(l.end)}if("function"==typeof this.onBeforeEventRender)for(var s=0;s<t;s++)this.Fa(s);for(var s=0;s<this.S.length;s++){var r={};r.minEnd=1e6,r.maxStart=-1,this.scrollLabels.push(r);var h=this.S[s];h.events=[],h.lines=[],h.blocks=[];for(var c=new DayPilot.Date(h.start),d=c.getTime(),u=c.addTime(i),v=u.getTime(),p=0;p<t;p++)if(!n[p]){var l=e[p],f=l.start,g=l.end,m=f.getTime(),y=g.getTime();if(!(y<m)){var b=!(y<=d||m>=v);if("Resources"===a.viewType&&(b=b&&h.id===l.resource),b){var C=new DayPilot.Event(l,a);C.part.dayIndex=s,C.part.start=d<m?l.start:c,C.part.end=v>y?l.end:u;var w=this.getPixels(C.part.start,h.start),D=this.getPixels(C.part.end,h.start),S=w.top,P=D.top;if(S===P&&(w.cut||D.cut))continue;var k=D.boxBottom;C.part.top=Math.floor(S/this.cellHeight)*this.cellHeight+1,C.part.height=Math.max(Math.ceil(k/this.cellHeight)*this.cellHeight-C.part.top,this.cellHeight-1)+1,C.part.barTop=Math.max(S-C.part.top-1,0),C.part.barHeight=Math.max(P-S-2,1);var f=C.part.top,g=C.part.top+C.part.height;f>r.maxStart&&(r.maxStart=f),g<r.minEnd&&(r.minEnd=g),f<this.minStart&&(this.minStart=f),g>this.maxEnd&&(this.maxEnd=g),h.events.push(C),"function"==typeof this.onBeforeEventRender&&(C.cache=this.Ea.events[p]),C.part.start.getTime()===m&&C.part.end.getTime()===y&&(n[p]=!0)}}}}for(var s=0;s<this.S.length;s++){var h=this.S[s];h.events.sort(this.Ga);for(var p=0;p<h.events.length;p++){var l=h.events[p];h.putIntoBlock(l)}for(var p=0;p<h.blocks.length;p++){var x=h.blocks[p];x.events.sort(this.Ga);for(var E=0;E<x.events.length;E++){var l=x.events[E];x.putIntoLine(l)}}}}},this.Ga=function(e,t){if(!(e&&t&&e.start&&t.start))return 0;var i=e.start().getTime()-t.start().getTime();return 0!==i?i:t.end().getTime()-e.end().getTime()},this.debug=function(e,t){this.debuggingEnabled&&(a.debugMessages||(a.debugMessages=[]),a.debugMessages.push(e),"undefined"!=typeof console&&console.log(e))},this.getPixels=function(e,t){t||(t=this.startDate);var i=t.getTime(),n=e.getTime(),a=this.cache.pixels[n+"_"+i];if(a)return a;i=t.getTime();var s=18e5,l=n-i,o=l%s,r=l-o,h=r+s;0===o&&(h=r);var c={};return c.cut=!1,c.top=this.Ha(l),c.boxTop=this.Ha(r),c.boxBottom=this.Ha(h),this.cache.pixels[n+"_"+i]=c,c},this.Ha=function(e){return Math.floor(this.cellHeight*e/18e5)},this.za=function(){this.startDate=new DayPilot.Date(this.startDate).getDatePart()},this.C=function(){this.nav.corner&&(this.nav.corner.style.height=this.headerHeight+"px")},this.G=function(){var e=this.ca();this.nav.scroll&&e>0&&(this.nav.scroll.style.height=e+"px")},this.P={},this.P.scope=null,this.P.notify=function(){a.P.scope&&a.P.scope["$apply"]()},this.P.apply=function(e){e()},this.sa=function(){if(a.nav.scroll){var e=a.nav.scroll.scrollTop,t=e/(2*a.cellHeight);a.ta.scrollHour=t}},this.Aa=function(){var e=0;"number"==typeof a.ta.scrollHour?e=2*a.cellHeight*a.ta.scrollHour:"Auto"===a.initScrollPos&&(e="BusinessHours"===this.heightSpec?2*this.cellHeight*this.businessBeginsHour:0),a.nav.scroll.scrollTop=e},this.Ia=function(){return!(!this.backendUrl&&"function"!=typeof WebForm_DoCallback)&&("undefined"==typeof a.events.list||!a.events.list)},this.z=function(){"hidden"===this.nav.top.style.visibility&&(this.nav.top.style.visibility="visible")},this.show=function(){a.visible=!0,a.nav.top.style.display="",this.ua()},this.hide=function(){a.visible=!1,a.nav.top.style.display="none"},this.Ja=function(){this.za(),this.A(),this.ba(),this.D(),this.E(),this.ua(),this.ra(),this.va(),t.register(this),this.Ka(),this.k("Init")},this.ta={},this.La=function(){this.ta.themes=[],this.ta.themes.push(this.theme||this.cssClassPrefix)},this.Ma=function(){for(var e=this.ta.themes,t=0;t<e.length;t++){var i=e[t];DayPilot.Util.removeClass(this.nav.top,i+"_main")}this.ta.themes=[]},this.Na=function(){if(this.afterRender(null,!1),"function"==typeof this.onAfterRender){var e={};e.isCallBack=!1,this.onAfterRender(e)}},this.Oa=function(){if("function"==typeof this.onInit&&!this.Pa){this.Pa=!0;var e={};this.onInit(e)}},this.Qa=function(){var e=a.nav.top;return!!e&&(e.offsetWidth>0&&e.offsetHeight>0)},this.Ka=function(){var e=a.Qa;e()||(a.n=setInterval(function(){e()&&(a.ra(),a.ua(),clearInterval(a.n))},100))},this.fa=function(e,t){return a.t.u()?DayPilot.Util.escapeTextHtml(e,t):DayPilot.Util.isNullOrUndefined(t)?DayPilot.Util.isNullOrUndefined(e)?"":e:t},this.internal={},this.internal.loadOptions=a.ya,this.internal.xssTextHtml=a.fa,this.init=function(){this.Da();var e=this.Ia();return this.La(),e?void this.Ja():(this.za(),this.A(),this.B(),this.ba(),this.D(),this.E(),this.z(),this.ua(),this.ra(),this.va(),t.register(this),this.events&&(this.C(),this.H()),this.Na(),this.Oa(),this.Ka(),this.Y=!0,this)},this.Init=this.init,this.ya(i)},DayPilot.CalendarColumn=function(e,t){var i=this;i.id=e.id,i.name=e.name,i.data=e.data,i.start=new DayPilot.Date(e.start),i.calendar=t,i.toJSON=function(){var e={};return e.id=this.id,this.start&&(e.start=this.start.toString()),e.name=this.name,e}},DayPilot.Calendar=t.Calendar,"undefined"!=typeof jQuery&&!function(e){e.fn.daypilotCalendar=function(e){var t=null,i=this.each(function(){if(!this.daypilot){var i=new DayPilot.Calendar(this.id);this.daypilot=i;for(name in e)i[name]=e[name];i.init(),t||(t=i)}});return 1===this.length?t:i}}(jQuery),function(){var e=DayPilot.am();e&&e.directive("daypilotCalendar",["$parse",function(e){return{"restrict":"E","template":"<div></div>","replace":!0,"link":function(t,i,n){var a=new DayPilot.Calendar(i[0]);a.P.scope=t,a.init();var s=n["id"];s&&(t[s]=a);var l=n["publishAs"];if(l){(0,e(l).assign)(t,a)}for(var o in n)0===o.indexOf("on")&&!function(i){a[i]=function(a){var s=e(n[i]);t["$apply"](function(){s(t,{"args":a})})}}(o);var r=t["$watch"],h=n["config"]||n["daypilotConfig"],c=n["events"]||n["daypilotEvents"];r.call(t,h,function(e){for(var t in e)a[t]=e[t];a.update(),a.Oa()},!0),r.call(t,c,function(e){a.events.list=e,a.update()},!0)}}}])}()}}();